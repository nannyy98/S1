
ГОТОВЫЙ ПАТЧ (админка + бот) — 2025-11-05 06:13

1) Админка
   • Добавлены страницы «Подкатегории», меню «Категории» и «Подкатегории».
   • Формы товара (добавление/редактирование) динамически подгружают подкатегории по выбранной категории.
   • Сохраняется subcategory_id, предвыбор работает при редактировании.
   • Склад: исправлены маршруты /inventory/update и /inventory/restock (валидаторы, лог движений).

2) Бот
   • Бренды удалены из сценария. Оставлены только подкатегории.
   • В папке bot_patch_subcategories_only лежит файл handlers_snippets_subcategories_only.py — вставьте функции в ваш handlers.py и добавьте ветки cat_/subcat_ в обработчике callback_data.

3) Быстрый чек-лист
   [ ] Создайте активные подкатегории у нужной категории.
   [ ] В товаре выберите подкатегорию и поставьте остаток > 0 (или уберите фильтр stock>0).
   [ ] В боте: Каталог → Категория → Подкатегория → Товары должны показаться.

4) API админки, на который опирается фронтенд:
   GET /api/subcategories/<category_id> → JSON: [{"id": 1, "name": "..."}]

Удачи!
